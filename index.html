<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>macOS Web Sim</title>
    <style>
        /* CSS VARIABLES & RESET */
        :root {
            --bg-glass: rgba(255, 255, 255, 0.65);
            --bg-glass-dark: rgba(0, 0, 0, 0.5);
            --shadow-lg: 0 20px 50px rgba(0,0,0,0.3);
            --radius-lg: 14px;
            --radius-md: 10px;
        }

        * {
            box-sizing: border-box;
            user-select: none; /* Prevent text highlighting */
        }

        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            /* Iconic macOS Gradient Wallpaper */
            background: linear-gradient(125deg, #FF9A9E 0%, #FECFEF 20%, #A18CD1 40%, #FBC2EB 60%, #8FD3F4 80%, #84fab0 100%);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- MENU BAR --- */
        .menubar {
            position: absolute;
            top: 0;
            width: 100%;
            height: 28px;
            background: var(--bg-glass);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            font-size: 13px;
            font-weight: 500;
            z-index: 1000;
            color: #222;
        }

        .menubar-left span, .menubar-right span {
            margin: 0 10px;
            cursor: default;
        }

        .apple-logo {
            font-weight: 700;
        }

        /* --- WINDOWS --- */
        .window {
            position: absolute;
            background: #fff;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: transform 0.1s, opacity 0.2s;
            opacity: 0;
            transform: scale(0.95);
            pointer-events: none; /* Hidden by default */
        }

        .window.active {
            opacity: 1;
            transform: scale(1);
            pointer-events: all;
        }

        .title-bar {
            height: 30px;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            padding-left: 12px;
            border-bottom: 1px solid #ddd;
            cursor: default; /* Fallback */
        }

        .controls {
            display: flex;
            gap: 8px;
        }

        .control {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .close { background: #ff5f56; border: 1px solid #e0443e; cursor: pointer;}
        .minimize { background: #ffbd2e; border: 1px solid #dea123; }
        .maximize { background: #27c93f; border: 1px solid #1aab29; }

        .close:hover { background: #cc4c45; }

        .window-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        /* Specific Windows */
        #finder {
            width: 600px;
            height: 400px;
            top: 100px;
            left: 100px;
        }

        #safari {
            width: 800px;
            height: 500px;
            top: 80px;
            left: 150px;
        }

        #vscode {
            width: 700px;
            height: 450px;
            top: 120px;
            left: 200px;
            background: #1e1e1e;
            color: white;
        }
        
        #vscode .title-bar { background: #2d2d2d; border-bottom: none; }

        /* Safari Browser Bar Simulation */
        .url-bar {
            background: #ddd;
            margin: 0 auto;
            width: 80%;
            padding: 5px 10px;
            border-radius: 8px;
            text-align: center;
            font-size: 12px;
            color: #555;
            margin-bottom: 15px;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
        }

        /* --- DOCK --- */
        .dock-container {
            position: absolute;
            bottom: 10px;
            width: 100%;
            display: flex;
            justify-content: center;
            z-index: 1000;
        }

        .dock {
            background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 8px;
            display: flex;
            gap: 12px;
            align-items: flex-end;
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
            transition: width 0.2s;
        }

        .app-icon {
            width: 50px;
            height: 50px;
            background: #fff;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        /* Dock Hover Effects (Magnification simulation) */
        .app-icon:hover {
            transform: scale(1.2) translateY(-10px);
            margin: 0 10px;
        }
        
        /* Active dot indicator */
        .app-icon.is-open::after {
            content: '';
            position: absolute;
            bottom: -6px;
            width: 4px;
            height: 4px;
            background: #333;
            border-radius: 50%;
        }

        /* Icon Colors */
        .icon-finder { background: linear-gradient(180deg, #1fa2ff, #12d8fa); }
        .icon-safari { background: white; color: #22a4f4; }
        .icon-vscode { background: #2c3e50; color: #3498db; }
        .icon-photos { background: white; }

        /* Draggable Handle Helper */
        .drag-handle {
            width: 100%;
            height: 100%;
        }

    </style>
</head>
<body>

    <!-- Top Menu Bar -->
    <div class="menubar">
        <div class="menubar-left">
            <span class="apple-logo">Ô£ø</span>
            <span style="font-weight: 700;">Finder</span>
            <span>File</span>
            <span>Edit</span>
            <span>View</span>
            <span>Go</span>
            <span>Window</span>
            <span>Help</span>
        </div>
        <div class="menubar-right">
            <span>üîã 100%</span>
            <span>üì∂ Wi-Fi</span>
            <span id="clock">12:00 AM</span>
        </div>
    </div>

    <!-- Finder Window -->
    <div class="window active" id="finder">
        <div class="title-bar" id="finder-header">
            <div class="controls">
                <div class="control close" onclick="closeWindow('finder')"></div>
                <div class="control minimize"></div>
                <div class="control maximize"></div>
            </div>
            <div class="drag-handle" style="position:absolute; left:0; top:0; width:100%; height:100%; z-index: -1;"></div>
        </div>
        <div class="window-content">
            <h2 style="margin-top:0;">Desktop</h2>
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px;">
                <div style="text-align: center;">
                    <div style="font-size: 40px;">üìÇ</div>
                    <div style="font-size: 12px; margin-top:5px;">Documents</div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 40px;">üñºÔ∏è</div>
                    <div style="font-size: 12px; margin-top:5px;">Images</div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 40px;">üéµ</div>
                    <div style="font-size: 12px; margin-top:5px;">Music</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Safari Window -->
    <div class="window" id="safari">
        <div class="title-bar" id="safari-header">
            <div class="controls">
                <div class="control close" onclick="closeWindow('safari')"></div>
                <div class="control minimize"></div>
                <div class="control maximize"></div>
            </div>
        </div>
        <div class="window-content" style="padding: 0; background: #fff; display:flex; flex-direction:column;">
            <div style="background:#f0f0f0; padding: 10px;">
                <div class="url-bar">üîí apple.com</div>
            </div>
            <div style="flex:1; display:flex; justify-content:center; align-items:center; flex-direction:column;">
                <h1 style="font-size: 50px;">Ô£ø</h1>
                <h2>MacBook Pro</h2>
                <p>Mind-blowing. Head-turning.</p>
                <button style="background:#0071e3; color:white; border:none; padding:10px 20px; border-radius:20px;">Buy</button>
            </div>
        </div>
    </div>

    <!-- VS Code Window -->
    <div class="window" id="vscode">
        <div class="title-bar" id="vscode-header">
            <div class="controls">
                <div class="control close" onclick="closeWindow('vscode')"></div>
                <div class="control minimize"></div>
                <div class="control maximize"></div>
            </div>
        </div>
        <div class="window-content" style="font-family: 'Courier New', monospace;">
            <p><span style="color: #c586c0;">function</span> <span style="color: #dcdcaa;">helloWorld</span>() {</p>
            <p>&nbsp;&nbsp;<span style="color: #9cdcfe;">console</span>.<span style="color: #dcdcaa;">log</span>(<span style="color: #ce9178;">"Hello Mac User!"</span>);</p>
            <p>}</p>
            <p><span style="color: #6a9955;">// Ready to code...</span></p>
        </div>
    </div>

    <!-- Dock -->
    <div class="dock-container">
        <div class="dock">
            <div class="app-icon icon-finder is-open" onclick="toggleWindow('finder')">üòä</div>
            <div class="app-icon icon-safari" onclick="toggleWindow('safari')">üß≠</div>
            <div class="app-icon icon-vscode" onclick="toggleWindow('vscode')">üìù</div>
            <div class="app-icon icon-photos">üì∏</div>
            <div class="app-icon" style="background:black; color:white;">üéµ</div>
            <div class="app-icon" style="background:grey;">‚öôÔ∏è</div>
        </div>
    </div>

    <script>
        // --- CLOCK FUNCTIONALITY ---
        function updateClock() {
            const now = new Date();
            let hours = now.getHours();
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12;
            hours = hours ? hours : 12; // the hour '0' should be '12'
            document.getElementById('clock').textContent = `${hours}:${minutes} ${ampm}`;
        }
        setInterval(updateClock, 1000);
        updateClock();

        // --- WINDOW MANAGEMENT (DRAG & Z-INDEX) ---
        let highestZ = 100;

        function makeDraggable(elementId, headerId) {
            const elmnt = document.getElementById(elementId);
            const header = document.getElementById(headerId);
            
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;

            header.onmousedown = dragMouseDown;

            // Bring to front on click
            elmnt.onmousedown = function() {
                highestZ++;
                elmnt.style.zIndex = highestZ;
            }

            function dragMouseDown(e) {
                e = e || window.event;
                e.preventDefault();
                // get the mouse cursor position at startup:
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                // call a function whenever the cursor moves:
                document.onmousemove = elementDrag;
            }

            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();
                // calculate the new cursor position:
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                // set the element's new position:
                elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
                elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
            }

            function closeDragElement() {
                // stop moving when mouse button is released:
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        // Initialize draggables
        makeDraggable("finder", "finder-header");
        makeDraggable("safari", "safari-header");
        makeDraggable("vscode", "vscode-header");

        // --- DOCK & WINDOW TOGGLE LOGIC ---
        function toggleWindow(id) {
            const win = document.getElementById(id);
            const dockIcon = document.querySelector(`.icon-${id}`) || document.querySelector(`.icon-${id.split('-')[0]}`); // Simple match
            
            if (win.classList.contains('active')) {
                // If it's active but behind other windows, bring to front
                if (parseInt(win.style.zIndex) < highestZ) {
                    highestZ++;
                    win.style.zIndex = highestZ;
                } else {
                    // Minimize if already focused (Optional behavior, currently just brings to front)
                    // win.classList.remove('active');
                    
                    // Let's implement minimize/close visual toggle
                    win.classList.add('active'); // Keep active for now
                }
            } else {
                // Open window
                win.classList.add('active');
                highestZ++;
                win.style.zIndex = highestZ;
                
                // Add dot to dock icon
                if(dockIcon) dockIcon.classList.add('is-open');
            }
        }

        function closeWindow(id) {
            const win = document.getElementById(id);
            win.classList.remove('active');
            
            // Remove dot from dock icon if you want the app to "Quit" completely
            const dockIcon = document.querySelector(`.icon-${id}`);
            if(dockIcon) dockIcon.classList.remove('is-open');
        }

    </script>
</body>
</html>
