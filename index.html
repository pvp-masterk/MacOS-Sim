<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>macOS Pro Simulator</title>
    <style>
        /* --- CORE SYSTEM & RESET --- */
        :root {
            --system-font: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", Helvetica, Arial, sans-serif;
            --glass-light: rgba(255, 255, 255, 0.72);
            --glass-sidebar: rgba(242, 242, 247, 0.85);
            --glass-border: rgba(255, 255, 255, 0.4);
            --window-shadow: 0 0 0 1px rgba(0,0,0,0.05), 0 24px 50px rgba(0,0,0,0.35);
            --dock-bg: rgba(255, 255, 255, 0.25);
            --accent-blue: #007AFF;
            --traffic-close: #FF5F57;
            --traffic-min: #FEBC2E;
            --traffic-max: #28C840;
        }

        * {
            box-sizing: border-box;
            user-select: none;
            -webkit-user-drag: none;
            cursor: default;
            outline: none;
        }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            font-family: var(--system-font);
            -webkit-font-smoothing: antialiased; /* Crucial for Apple look */
            /* High Res Abstract Wallpaper */
            background: url('https://4kwallpapers.com/images/wallpapers/macos-big-sur-apple-layers-fluidic-colorful-wwdc-2020-5k-5120x2880-1455.jpg') center/cover no-repeat;
        }

        /* --- BOOT SEQUENCE --- */
        #boot-loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 10000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 0.8s ease-in-out;
        }
        .boot-icon { color: white; font-size: 90px; margin-bottom: 50px; }
        .boot-progress-track {
            width: 220px; height: 6px; background: #333; border-radius: 6px; overflow: hidden;
        }
        .boot-progress-bar {
            height: 100%; width: 0%; background: #fff; border-radius: 6px;
            transition: width 2.5s cubic-bezier(0.2, 0, 0, 1);
        }

        /* --- MENU BAR --- */
        .menubar {
            position: absolute; top: 0; width: 100%; height: 28px;
            background: rgba(255, 255, 255, 0.35);
            backdrop-filter: blur(25px) saturate(150%);
            -webkit-backdrop-filter: blur(25px) saturate(150%);
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 20px; color: #1d1d1f; font-size: 13px; font-weight: 500;
            z-index: 5000;
        }
        .menu-group { display: flex; align-items: center; height: 100%; gap: 18px; }
        .menu-item:hover { opacity: 0.7; }
        .apple-icon { font-size: 15px; font-weight: 600; }
        .app-title { font-weight: 700; }

        /* --- WINDOW ENGINE --- */
        .window {
            position: absolute;
            background: #fff;
            border-radius: 12px;
            box-shadow: var(--window-shadow);
            display: flex; flex-direction: column; overflow: hidden;
            opacity: 0; transform: scale(0.95); /* Initial State */
            pointer-events: none;
            transition: transform 0.25s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.2s ease;
        }

        .window.active {
            opacity: 1; transform: scale(1); pointer-events: auto;
        }
        
        .window.closing {
            opacity: 0; transform: scale(0.9);
        }

        /* Unified Title Bar (Big Sur Style) */
        .window-toolbar {
            height: 52px;
            background: var(--glass-sidebar); /* Matches sidebar color */
            display: flex; align-items: center; padding: 0 16px;
            /* Allow dragging */
        }
        
        .traffic-lights {
            display: flex; gap: 8px; margin-right: 20px;
        }
        .t-btn {
            width: 12px; height: 12px; border-radius: 50%;
            border: 0.5px solid rgba(0,0,0,0.1);
            position: relative;
            display: flex; justify-content: center; align-items: center;
            font-size: 8px; color: rgba(0,0,0,0.5); font-weight: 900;
            transition: filter 0.2s;
        }
        .t-close { background: var(--traffic-close); }
        .t-min { background: var(--traffic-min); }
        .t-max { background: var(--traffic-max); }
        
        /* Hover effects for traffic lights */
        .traffic-lights:hover .t-close::before { content: '√ó'; }
        .traffic-lights:hover .t-min::before { content: '‚àí'; }
        .traffic-lights:hover .t-max::before { content: '+'; }
        .t-btn:active { filter: brightness(0.8); }

        /* --- FINDER SPECIFIC --- */
        #finder { width: 800px; height: 500px; top: 100px; left: 150px; }
        .finder-layout { display: flex; height: 100%; }
        
        /* Blurred Sidebar */
        .sidebar {
            width: 200px;
            background: var(--glass-sidebar);
            backdrop-filter: blur(40px);
            padding: 10px;
            border-right: 1px solid rgba(0,0,0,0.05);
            font-size: 13px; color: #444;
            display: flex; flex-direction: column; gap: 2px;
        }
        /* Extend background up to toolbar visually */
        #finder .window-toolbar { background: var(--glass-sidebar); backdrop-filter: blur(40px); }

        .sb-title { font-size: 11px; font-weight: 700; color: #999; margin: 15px 10px 5px; }
        .sb-item {
            padding: 6px 10px; border-radius: 6px; display: flex; align-items: center; gap: 8px;
        }
        .sb-item.active { background: rgba(0,0,0,0.1); color: #000; }
        .content-area { flex: 1; background: #fff; padding: 20px; }
        
        /* Grid of Files */
        .file-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 20px; }
        .file { display: flex; flex-direction: column; align-items: center; gap: 5px; }
        .f-icon { width: 50px; height: auto; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2)); }
        .f-name { font-size: 12px; font-weight: 500; color: #333; text-align: center; }

        /* --- SAFARI SPECIFIC --- */
        #safari { width: 900px; height: 600px; top: 60px; left: 100px; }
        #safari .window-toolbar {
            background: #fff; /* Safari active tab is white */
            justify-content: space-between; padding-right: 20px;
        }
        .url-bar-container {
            flex: 1; display: flex; justify-content: center;
        }
        .url-bar {
            background: #f5f5f7; border-radius: 8px; width: 400px; padding: 8px;
            display: flex; justify-content: center; align-items: center; gap: 8px;
            font-size: 12px; color: #555;
            box-shadow: 0 0 0 1px rgba(0,0,0,0.02);
        }
        .safari-body { flex: 1; background: #fff; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        
        /* --- CALCULATOR SPECIFIC --- */
        #calculator { 
            width: 232px; height: 322px; background: #323232; 
            top: 150px; left: 600px;
        }
        #calculator .window-toolbar { 
            background: #323232; height: 30px; border-top-left-radius: 12px; border-top-right-radius: 12px;
        }
        .calc-display {
            background: #323232; color: #fff; text-align: right;
            font-size: 44px; font-weight: 200; padding: 0 12px 10px;
        }
        .calc-buttons {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 1px;
            background: #323232;
        }
        .c-btn {
            height: 48px; border: none; font-size: 19px;
            cursor: pointer; transition: opacity 0.1s;
        }
        .c-btn:active { opacity: 0.7; }
        .b-grey { background: #535353; color: #fff; }
        .b-orange { background: #FF9F0A; color: #fff; font-size: 22px; padding-bottom: 4px; }
        .b-dark { background: #6c6c6c; color: #fff; } /* Actually lighter grey in Mac dark mode calc */
        
        /* Fix Calculator Colors to Match Real Mac */
        .b-dark { background: #505050; } /* Numbers */
        .b-grey { background: #3e3e3e; } /* Top row */
        
        /* --- DOCK --- */
        .dock-wrapper {
            position: absolute; bottom: 10px; width: 100%;
            display: flex; justify-content: center; z-index: 6000;
        }
        .dock {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            height: 68px; padding: 0 12px; border-radius: 20px;
            display: flex; align-items: center; gap: 10px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        }
        .dock-item {
            width: 50px; height: 50px; position: relative;
            transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform-origin: bottom center;
        }
        .dock-item img {
            width: 100%; height: 100%; object-fit: contain;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.25));
        }
        .dock-item:hover { transform: scale(1.15) translateY(-8px); margin: 0 8px; }
        
        /* Bounce Animation */
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        .dock-item.bouncing { animation: bounce 0.8s ease infinite; }
        
        /* Active Dot */
        .dock-dot {
            position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%);
            width: 4px; height: 4px; background: rgba(0,0,0,0.8); border-radius: 50%;
            display: none;
        }
        .dock-item.open .dock-dot { display: block; }
        
        /* Tooltip */
        .tooltip {
            position: absolute; top: -45px; left: 50%; transform: translateX(-50%);
            background: rgba(240, 240, 240, 0.9); border: 0.5px solid rgba(0,0,0,0.1);
            color: #333; padding: 4px 10px; border-radius: 6px; font-size: 12px;
            opacity: 0; pointer-events: none; transition: opacity 0.2s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .dock-item:hover .tooltip { opacity: 1; }

    </style>
</head>
<body>

    <!-- BOOT LOADER -->
    <div id="boot-loader">
        <div class="boot-icon">Ô£ø</div>
        <div class="boot-progress-track">
            <div class="boot-progress-bar" id="boot-bar"></div>
        </div>
    </div>

    <!-- MENUBAR -->
    <div class="menubar">
        <div class="menu-group">
            <span class="apple-icon">Ô£ø</span>
            <span class="app-title" id="menubar-app-name">Finder</span>
            <span>File</span>
            <span>Edit</span>
            <span>View</span>
            <span>Go</span>
            <span>Window</span>
            <span>Help</span>
        </div>
        <div class="menu-group" style="gap: 15px;">
            <span>üîã 100%</span>
            <span><svg width="16" height="12" viewBox="0 0 18 14" fill="currentColor"><path d="M9 14C11.5 14 13.8 13.1 15.6 11.6L9 3.5L2.4 11.6C4.2 13.1 6.5 14 9 14ZM9 0C3.6 0 0 3.8 0 3.8L9 14.8L18 3.8C18 3.8 14.4 0 9 0Z"/></svg></span>
            <span><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10z"/><path d="M13 7h-2v6h6v-2h-4z"/></svg></span>
            <span id="clock" style="font-feature-settings: 'tnum';">Mon Jun 22 9:41 AM</span>
        </div>
    </div>

    <!-- FINDER WINDOW -->
    <div class="window active" id="finder" onmousedown="focusWindow(this)">
        <div class="window-toolbar" id="header-finder">
            <div class="traffic-lights">
                <div class="t-btn t-close" onclick="closeWindow('finder')"></div>
                <div class="t-btn t-min" onclick="minimizeWindow('finder')"></div>
                <div class="t-btn t-max"></div>
            </div>
            <div style="color:#555; font-weight:600; font-size:13px; margin-left:10px;">Downloads</div>
        </div>
        <div class="finder-layout">
            <div class="sidebar">
                <div class="sb-title">Favorites</div>
                <div class="sb-item active">üîµ AirDrop</div>
                <div class="sb-item">üïí Recents</div>
                <div class="sb-item">üÖ∞Ô∏è Applications</div>
                <div class="sb-item">‚¨áÔ∏è Downloads</div>
                <div class="sb-item">üñºÔ∏è Pictures</div>
                <div class="sb-title">iCloud</div>
                <div class="sb-item">‚òÅÔ∏è iCloud Drive</div>
                <div class="sb-item">üìÑ Documents</div>
            </div>
            <div class="content-area">
                <div class="file-grid">
                    <div class="file">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/e/e4/Visual_Studio_Code_1.35_icon.svg" class="f-icon">
                        <span class="f-name">Project.code</span>
                    </div>
                    <div class="file">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/8/87/PDF_file_icon.svg" class="f-icon">
                        <span class="f-name">Resume.pdf</span>
                    </div>
                    <div class="file">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/2/21/MacOS_folder_icon_%282017%29.svg" class="f-icon">
                        <span class="f-name">Photos</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SAFARI WINDOW -->
    <div class="window" id="safari" onmousedown="focusWindow(this)">
        <div class="window-toolbar" id="header-safari">
            <div class="traffic-lights">
                <div class="t-btn t-close" onclick="closeWindow('safari')"></div>
                <div class="t-btn t-min" onclick="minimizeWindow('safari')"></div>
                <div class="t-btn t-max"></div>
            </div>
            <div class="url-bar-container">
                <div class="url-bar">üîí apple.com</div>
            </div>
        </div>
        <div class="safari-body">
            <h1 style="font-size: 30px; font-weight: 600; color: #aaa;">Safari Start Page</h1>
        </div>
    </div>

    <!-- CALCULATOR WINDOW -->
    <div class="window" id="calculator" onmousedown="focusWindow(this)">
        <div class="window-toolbar" id="header-calculator">
            <div class="traffic-lights">
                <div class="t-btn t-close" onclick="closeWindow('calculator')"></div>
                <div class="t-btn t-min" onclick="minimizeWindow('calculator')"></div>
                <div class="t-btn t-max"></div>
            </div>
        </div>
        <div class="calc-display" id="calc-res">0</div>
        <div class="calc-buttons">
            <button class="c-btn b-grey" onclick="clc('C')">AC</button>
            <button class="c-btn b-grey">+/-</button>
            <button class="c-btn b-grey">%</button>
            <button class="c-btn b-orange" onclick="clc('/')">√∑</button>
            
            <button class="c-btn b-dark" onclick="clc(7)">7</button>
            <button class="c-btn b-dark" onclick="clc(8)">8</button>
            <button class="c-btn b-dark" onclick="clc(9)">9</button>
            <button class="c-btn b-orange" onclick="clc('*')">√ó</button>

            <button class="c-btn b-dark" onclick="clc(4)">4</button>
            <button class="c-btn b-dark" onclick="clc(5)">5</button>
            <button class="c-btn b-dark" onclick="clc(6)">6</button>
            <button class="c-btn b-orange" onclick="clc('-')">‚àí</button>

            <button class="c-btn b-dark" onclick="clc(1)">1</button>
            <button class="c-btn b-dark" onclick="clc(2)">2</button>
            <button class="c-btn b-dark" onclick="clc(3)">3</button>
            <button class="c-btn b-orange" onclick="clc('+')">+</button>
            
            <button class="c-btn b-dark" style="grid-column: span 2; border-bottom-left-radius: 12px; text-align: left; padding-left: 20px;" onclick="clc(0)">0</button>
            <button class="c-btn b-dark">.</button>
            <button class="c-btn b-orange" style="border-bottom-right-radius: 12px;" onclick="clc('=')">=</button>
        </div>
    </div>

    <!-- DOCK -->
    <div class="dock-wrapper">
        <div class="dock">
            <div class="dock-item open" id="icon-finder" onclick="launchApp('finder')">
                <div class="tooltip">Finder</div>
                <img src="https://upload.wikimedia.org/wikipedia/commons/c/c9/Finder_Icon_macOS_Big_Sur.png">
                <div class="dock-dot"></div>
            </div>
            <div class="dock-item">
                <div class="tooltip">Launchpad</div>
                <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_Launchpad_Icon.png">
                <div class="dock-dot"></div>
            </div>
            <div class="dock-item" id="icon-safari" onclick="launchApp('safari')">
                <div class="tooltip">Safari</div>
                <img src="https://upload.wikimedia.org/wikipedia/commons/5/52/Safari_browser_logo.png">
                <div class="dock-dot"></div>
            </div>
            <div class="dock-item">
                <div class="tooltip">Messages</div>
                <img src="https://upload.wikimedia.org/wikipedia/commons/5/51/IMessage_logo.svg">
                <div class="dock-dot"></div>
            </div>
            <div class="dock-item" id="icon-calculator" onclick="launchApp('calculator')">
                <div class="tooltip">Calculator</div>
                <img src="https://upload.wikimedia.org/wikipedia/commons/6/6e/Calculator_icon_macOS_Big_Sur.png">
                <div class="dock-dot"></div>
            </div>
            <div class="dock-item">
                <div class="tooltip">Photos</div>
                <img src="https://upload.wikimedia.org/wikipedia/commons/c/c9/Apple_Photos_icon.png">
                <div class="dock-dot"></div>
            </div>
            <div style="width: 1px; height: 40px; background: rgba(0,0,0,0.2); margin: 0 4px;"></div>
            <div class="dock-item">
                <div class="tooltip">Trash</div>
                <img src="https://cdn-icons-png.flaticon.com/512/3616/3616806.png" style="opacity:0.8; filter: grayscale(1);">
            </div>
        </div>
    </div>

    <script>
        // --- BOOT UP LOGIC ---
        window.onload = () => {
            const bar = document.getElementById('boot-bar');
            // Trigger animation
            setTimeout(() => bar.style.width = "100%", 100);
            
            // Fade out
            setTimeout(() => {
                const loader = document.getElementById('boot-loader');
                loader.style.opacity = 0;
                setTimeout(() => {
                    loader.style.display = 'none';
                    // Open Finder initially
                    launchApp('finder');
                }, 800);
            }, 2500);
        };

        // --- CLOCK ---
        const clockEl = document.getElementById('clock');
        function updateClock() {
            const now = new Date();
            const days = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
            const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
            
            let h = now.getHours();
            let m = now.getMinutes();
            const ampm = h >= 12 ? 'PM' : 'AM';
            h = h % 12 || 12;
            m = m < 10 ? '0'+m : m;
            
            clockEl.innerText = `${days[now.getDay()]} ${months[now.getMonth()]} ${now.getDate()}   ${h}:${m} ${ampm}`;
        }
        setInterval(updateClock, 1000);
        updateClock();

        // --- WINDOW MANAGEMENT ---
        let highestZ = 100;
        
        function launchApp(id) {
            const win = document.getElementById(id);
            const dockItem = document.getElementById(`icon-${id}`);
            const appName = id.charAt(0).toUpperCase() + id.slice(1);
            
            document.getElementById('menubar-app-name').innerText = appName;

            // Bounce Animation
            if(dockItem && !dockItem.classList.contains('open')) {
                dockItem.classList.add('bouncing');
                setTimeout(() => dockItem.classList.remove('bouncing'), 1600);
            }
            if(dockItem) dockItem.classList.add('open');

            // Open Window
            win.style.display = 'flex'; // Ensure it's in layout
            
            // Wait a tick for CSS transition
            setTimeout(() => {
                win.classList.remove('closing');
                win.classList.add('active');
            }, 10);
            
            focusWindow(win);
        }

        function closeWindow(id) {
            const win = document.getElementById(id);
            const dockItem = document.getElementById(`icon-${id}`);
            
            win.classList.add('closing');
            win.classList.remove('active');
            
            // Remove active dot
            if(dockItem) dockItem.classList.remove('open');
            
            // Reset to Finder in menu
            document.getElementById('menubar-app-name').innerText = 'Finder';
        }

        function minimizeWindow(id) {
            const win = document.getElementById(id);
            win.classList.remove('active');
            win.classList.add('closing');
            // Keep dock dot active
        }

        function focusWindow(win) {
            highestZ++;
            win.style.zIndex = highestZ;
            
            // Update Menubar Name
            let name = win.id.charAt(0).toUpperCase() + win.id.slice(1);
            document.getElementById('menubar-app-name').innerText = name;
        }

        // --- ROBUST DRAGGING PHYSICS ---
        // (Prevents mouse slipping off window active area)
        const draggables = ['finder', 'safari', 'calculator'];
        
        draggables.forEach(id => {
            const win = document.getElementById(id);
            const header = document.getElementById(`header-${id}`);
            
            let isDragging = false;
            let startX, startY, initialLeft, initialTop;

            header.addEventListener('mousedown', (e) => {
                // Ignore if clicking traffic lights
                if(e.target.classList.contains('t-btn')) return;

                focusWindow(win);
                isDragging = true;
                startX = e.clientX;
                startY = e.clientY;
                initialLeft = win.offsetLeft;
                initialTop = win.offsetTop;
            });

            // Add listener to WINDOW so drag continues even if mouse leaves div
            window.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                
                const dx = e.clientX - startX;
                const dy = e.clientY - startY;
                
                win.style.left = `${initialLeft + dx}px`;
                win.style.top = `${initialTop + dy}px`;
            });

            window.addEventListener('mouseup', () => {
                isDragging = false;
            });
        });

        // --- CALCULATOR LOGIC ---
        let currentInput = "0";
        function clc(val) {
            const display = document.getElementById('calc-res');
            if(val === 'C') currentInput = "0";
            else if(val === '=') {
                try { currentInput = eval(currentInput).toString(); } 
                catch { currentInput = "Error"; }
            } else {
                if(currentInput === "0") currentInput = val.toString();
                else currentInput += val;
            }
            // Simple length limit
            if(currentInput.length > 9) currentInput = currentInput.substring(0,9);
            display.innerText = currentInput;
        }

    </script>
</body>
</html>
